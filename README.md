# MD-Updater 模组使用说明

## Links
[开发者文档](DEVELOPER.md)<br>
[服务器设置教程](SERVER_SETUP.md)

## 概述

MD-Updater 是一个专为 Minecraft Forge 1.20.1 开发的模组，用于在游戏客户端手动检查并更新整合包中的模组。它在游戏主菜单中添加一个"检查更新"按钮，玩家点击后会从指定的服务器获取最新的模组列表，对比本地 mods 文件夹下载缺失的模组。

## 主要功能

- **手动更新检查**：通过按键或FancyMenu按钮触发更新检查
- **智能比对**：自动比对服务器模组列表与本地mods文件夹
- **安全下载**：仅下载缺失的模组文件，不删除现有文件
- **中文界面**：完全中文化的用户界面
- **异步处理**：后台下载，不阻塞游戏界面

## 系统要求

- Minecraft 1.20.1
- Minecraft Forge 47.2.0 或更高版本
- Java 17 或更高版本
- FancyMenu 模组（用于主菜单按钮集成）

## 安装步骤

### 1. 基础安装

1. 确保已安装 Minecraft Forge 1.20.1
2. 将 `MD-Updater-1.0.0.jar` 放入 `.minecraft/mods/` 文件夹
3. 启动游戏验证模组加载成功

### 2. FancyMenu 集成（推荐）

1. 安装 FancyMenu 模组（适用于 Minecraft 1.20.1 的版本）
2. 启动游戏，进入主菜单
3. 按照 FancyMenu 集成指南配置"检查更新"按钮

## 使用方法

### 方法一：按键触发

1. 在游戏中（包括主菜单）按下 **U** 键
2. 系统将自动检查服务器上的模组列表
3. 如发现缺失模组，会弹出确认对话框
4. 点击"是"开始下载，点击"否"取消操作

### 方法二：FancyMenu按钮

1. 在主菜单点击"检查更新"按钮
2. 后续流程与按键触发相同

## 更新流程详解

### 1. 检查阶段

- 连接服务器下载 `mod_list.json` 文件
- 解析JSON获取期望的模组列表
- 比对本地 `mods/` 文件夹中的文件
- 识别缺失的模组

### 2. 确认阶段

- 显示发现的缺失模组数量和名称
- 提供"是/否"选择按钮
- 用户可以选择是否进行下载

### 3. 下载阶段

- 在后台线程中下载缺失的模组
- 显示下载进度信息（控制台日志）
- 下载完成后显示完成提示

### 4. 完成阶段

- 提示用户重启游戏以加载新模组
- 新下载的模组将在下次启动时生效

## 配置说明

### 服务器URL配置

模组默认从以下URL获取模组列表：
```
https://example.com/mod_list.json
```

**重要**：在实际使用前，需要修改源码中的 `MOD_LIST_URL` 常量为您的实际服务器地址。

### 按键绑定

- 默认按键：U 键
- 可在游戏设置 > 控制 > MD-Updater 模组 中修改
- 按键在主菜单和游戏中均可使用

## 故障排除

### 常见问题

**Q: 按下U键没有反应**
A: 检查模组是否正确安装，查看游戏日志是否有错误信息

**Q: 提示"无法获取 mod_list.json 文件"**
A: 检查网络连接和服务器URL是否正确配置

**Q: 下载失败**
A: 检查服务器上的模组文件是否存在且可访问

**Q: 下载的模组没有生效**
A: 重启游戏，Minecraft需要重启才能加载新的模组文件

### 日志信息

模组会在控制台输出详细的日志信息：
- `[MD-Updater] 发现缺失模组: xxx.jar`
- `[MD-Updater] 正在下载: xxx.jar`
- `[MD-Updater] 下载完成: xxx.jar`
- `[MD-Updater] 所有模组下载完成！`

## 安全注意事项

1. **服务器安全**：确保模组列表服务器的安全性，避免恶意文件
2. **网络安全**：建议使用HTTPS协议传输
3. **文件验证**：下载的文件应来自可信来源
4. **备份建议**：定期备份 `mods/` 文件夹

## 技术限制

1. **只增不减**：模组只会下载缺失文件，不会删除旧版本
2. **文件名匹配**：基于文件名进行比对，不支持版本比较
3. **手动触发**：需要用户主动触发检查，不支持自动更新
4. **客户端限制**：仅在客户端运行，不影响服务器

## 版本信息

- 模组版本：1.0.0
- 支持的Minecraft版本：1.20.1
- 支持的Forge版本：47.2.0+
- 开发语言：Java 17

## 许可证

本模组采用 MIT 许可证发布。

## 技术支持

如遇到问题，请提供以下信息：
- Minecraft版本
- Forge版本
- 模组版本
- 错误日志
- 操作步骤

---

*本文档最后更新：2025年6月8日*

*Powered by Manus.ai*

